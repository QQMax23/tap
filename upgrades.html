<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–£–ª—É—á—à–µ–Ω–∏—è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-950 text-white font-sans min-h-screen flex flex-col justify-between">
  <div class="p-4 text-center text-3xl font-bold text-yellow-400">‚öô –£–ª—É—á—à–µ–Ω–∏—è</div>
  <div class="p-4 space-y-4 max-w-2xl mx-auto">
    <div class="text-right text-yellow-300 text-lg mb-2">–¢–≤–æ–∏ –º–æ–Ω–µ—Ç—ã: <span id="userCoins">0</span> ü™ô</div>
    <div id="upgradeList" class="grid gap-4"></div>
  </div>

  <!-- –ù–∏–∂–Ω–µ–µ –º–µ–Ω—é –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
  <div class="bg-black/80 text-yellow-300 text-sm md:text-lg flex justify-around py-3 border-t border-yellow-700">
    <a href="/index.html">üè† –ì–ª–∞–≤–Ω–∞—è</a>
    <a href="/upgrades.html">‚öô –£–ª—É—á—à–µ–Ω–∏—è</a>
    <a href="/stats.html">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</a>
    <a href="/referral.html">üéÅ –†–µ—Ñ–µ—Ä–∞–ª–∫–∞</a>
    <a href="/admin.html">üõ† –ê–¥–º–∏–Ω–∫–∞</a>
  </div>

  <script>
    let coins = parseInt(localStorage.getItem("coins")) || 0;
    let upgradeEffects = JSON.parse(localStorage.getItem("upgradeEffects")) || {};
    let purchased = JSON.parse(localStorage.getItem("purchasedUpgrades")) || [];

    const userCoins = document.getElementById("userCoins");
    const list = document.getElementById("upgradeList");
    userCoins.textContent = coins;

    const upgrades = [
      { name: "–ü–µ—Ä—á–∞—Ç–∫–∞ –Ω–æ–≤–∏—á–∫–∞", cost: 10, icon: "üß§", effect: { extraTapValue: 1 } },
      { name: "–û—Å—Ç—Ä—ã–π –ø–∞–ª–µ—Ü", cost: 20, icon: "üó°Ô∏è", effect: { extraTapValue: 1 } },
      { name: "–¢–∞–ø-–±—Ä–∞—Å–ª–µ—Ç –∏–∑ –±—Ä–æ–Ω–∑—ã", cost: 50, icon: "üìø", effect: { extraTapValue: 1 } },
      { name: "–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–Ω–æ–º–æ–≤", cost: 100, icon: "‚öíÔ∏è" },
      { name: "–ó–∞–∫–∞–ª—ë–Ω–Ω–∞—è –∫–æ–∂–∞", cost: 150, icon: "üõ°Ô∏è" },
      { name: "–î–≤–∞ –ø–∞–ª—å—Ü–∞", cost: 200, icon: "‚úåÔ∏è", effect: { extraTapValue: 2 } },
      { name: "–ü–∞–ª–µ—Ü —Å –∫–æ–ª—å—Ü–æ–º –º–∞–≥–∞", cost: 999, icon: "üíç", effect: { extraTapValue: 3 } },
      { name: "–ù–∞—ë–º–Ω—ã–π –∫–æ–ª–¥—É–Ω-—Ç–∞–ø–µ—Ä", cost: 7500, icon: "üßô", effect: { extraTapValue: 5 } },
      { name: "–†—É–∫–∞ –¥—Ä–∞–∫–æ–Ω–∞", cost: 50000, icon: "üêâ", effect: { extraTapValue: 10 } },
      { name: "–ö–Ω–∏–≥–∞ –í–µ–ª–∏–∫–æ–≥–æ –¢–∞–ø–∞", cost: 20000000, icon: "üìñ", effect: { extraTapValue: 100 } },
      { name: "–ö–æ—Ä–æ–Ω–∞ –í–µ—á–Ω–æ–≥–æ –¢–∞–ø–∞", cost: 100000000, icon: "üëë", effect: { extraTapValue: 1000 } }
    ];

    function applyUpgradeEffects(effect) {
      for (const key in effect) {
        if (!upgradeEffects[key]) upgradeEffects[key] = 0;
        upgradeEffects[key] += effect[key];
      }
      localStorage.setItem("upgradeEffects", JSON.stringify(upgradeEffects));
    }

    upgrades.forEach(upg => {
      const item = document.createElement("div");
      item.className = "bg-gray-800 p-4 rounded-lg flex justify-between items-center shadow hover:scale-[1.02] transition";

      const bought = purchased.includes(upg.name);

      item.innerHTML = `
        <div class="flex items-center gap-4">
          <div class="text-4xl">${upg.icon || "‚ú®"}</div>
          <div>
            <div class="text-lg font-semibold">${upg.name}</div>
            <div class="text-yellow-300">üí∞ ${upg.cost.toLocaleString()} –º–æ–Ω–µ—Ç</div>
          </div>
        </div>
        <button class="${bought ? 'bg-green-600 cursor-not-allowed' : 'bg-yellow-500 hover:bg-yellow-400'} text-black font-bold py-2 px-4 rounded" ${bought ? 'disabled' : ''}>${bought ? '–ö—É–ø–ª–µ–Ω–æ' : '–ö—É–ø–∏—Ç—å'}</button>
      `;

      const button = item.querySelector("button");
      if (!bought) {
        button.addEventListener("click", () => {
          if (coins >= upg.cost) {
            coins -= upg.cost;
            userCoins.textContent = coins;
            localStorage.setItem("coins", coins);
            if (upg.effect) applyUpgradeEffects(upg.effect);
            purchased.push(upg.name);
            localStorage.setItem("purchasedUpgrades", JSON.stringify(purchased));
            button.disabled = true;
            button.textContent = "–ö—É–ø–ª–µ–Ω–æ";
            button.className = "bg-green-600 cursor-not-allowed text-black font-bold py-2 px-4 rounded";
          } else {
            alert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
          }
        });
      }

      list.appendChild(item);
    });
  </script>
</body>
</html>
